# Admin CRUD åŠŸèƒ½å¯¦ç¾ç¸½çµ

## âœ… å·²å¯¦ç¾çš„åŠŸèƒ½

### 1. ç”¨æˆ¶ç®¡ç† (`/pgadmin2026/users`)

#### åŠŸèƒ½åˆ—è¡¨
- âœ… **æŸ¥çœ‹ç”¨æˆ¶åˆ—è¡¨**
  - æ”¯æŒæœç´¢ï¼ˆå§“åã€éƒµç®±ã€IDï¼‰
  - åˆ†é é¡¯ç¤º
  - é¡¯ç¤ºç”¨æˆ¶åŸºæœ¬ä¿¡æ¯ï¼ˆé ­åƒã€å§“åã€éƒµç®±ã€é¤˜é¡ã€ç­‰ç´šï¼‰

- âœ… **æŸ¥çœ‹ç”¨æˆ¶è©³æƒ…** (`/pgadmin2026/users/[userId]`)
  - åŸºæœ¬ä¿¡æ¯æ¨™ç±¤é 
  - æ´»å‹•è¨˜éŒ„æ¨™ç±¤é ï¼ˆä¸‹æ³¨ã€äº¤æ˜“ï¼‰
  - è©•è«–æ¨™ç±¤é 

- âœ… **ç·¨è¼¯ç”¨æˆ¶** (`/pgadmin2026/users/[userId]/edit`)
  - ç·¨è¼¯é¡¯ç¤ºåç¨±
  - èª¿æ•´é¤˜é¡
  - ä¿®æ”¹ç­‰ç´š
  - æ›´æ–°é ­åƒ URL

- âœ… **åˆªé™¤ç”¨æˆ¶**
  - éœ€è¦è¼¸å…¥åˆªé™¤åŸå› 
  - ç¢ºèªå°è©±æ¡†

#### API è·¯ç”±
- `GET /api/admin/users` - ç²å–ç”¨æˆ¶åˆ—è¡¨
- `GET /api/admin/users/[userId]` - ç²å–ç”¨æˆ¶è©³æƒ…
- `PATCH /api/admin/users/[userId]` - æ›´æ–°ç”¨æˆ¶
- `DELETE /api/admin/users/[userId]` - åˆªé™¤ç”¨æˆ¶
- `GET /api/admin/users/[userId]/activity` - ç²å–ç”¨æˆ¶æ´»å‹•
- `GET /api/admin/users/[userId]/comments` - ç²å–ç”¨æˆ¶è©•è«–

---

### 2. å¸‚å ´ç®¡ç† (`/pgadmin2026/markets`)

#### åŠŸèƒ½åˆ—è¡¨
- âœ… **æŸ¥çœ‹å¸‚å ´åˆ—è¡¨**
  - æŒ‰ç‹€æ…‹ç¯©é¸ï¼ˆOPEN, LOCKED, SETTLEDï¼‰
  - é¡¯ç¤ºå¸‚å ´åŸºæœ¬ä¿¡æ¯

- âœ… **æŸ¥çœ‹å¸‚å ´è©³æƒ…** (`/pgadmin2026/markets/[marketId]`)
  - ä¸‹æ³¨è¨˜éŒ„æ¨™ç±¤é 
  - è©•è«–æ¨™ç±¤é 
  - åˆªé™¤ä¸‹æ³¨å’Œè©•è«–åŠŸèƒ½

- âœ… **å‰µå»ºå¸‚å ´** (`/pgadmin2026/markets/create`)
  - è¨­ç½®æ¨™é¡Œã€æè¿°
  - è¨­ç½®é—œé–‰æ™‚é–“
  - é¸æ“‡ç‹€æ…‹
  - æ·»åŠ æ¨™ç±¤

- âœ… **ç·¨è¼¯å¸‚å ´** (`/pgadmin2026/markets/[marketId]/edit`)
  - ç·¨è¼¯æ‰€æœ‰å¸‚å ´ä¿¡æ¯
  - ä¿®æ”¹æ¨™ç±¤

- âœ… **åˆªé™¤å¸‚å ´**
  - åªèƒ½åˆªé™¤æœªçµç®—çš„å¸‚å ´
  - æœƒè‡ªå‹•é€€æ¬¾æ‰€æœ‰ä¸‹æ³¨
  - éœ€è¦è¼¸å…¥åˆªé™¤åŸå› 

#### API è·¯ç”±
- `GET /api/markets` - ç²å–å¸‚å ´åˆ—è¡¨ï¼ˆå·²æœ‰ï¼‰
- `GET /api/markets/[marketId]` - ç²å–å¸‚å ´è©³æƒ…ï¼ˆå·²æœ‰ï¼‰
- `POST /api/admin/markets` - å‰µå»ºå¸‚å ´
- `PATCH /api/admin/markets/[marketId]` - æ›´æ–°å¸‚å ´
- `DELETE /api/admin/markets/[marketId]` - åˆªé™¤å¸‚å ´
- `POST /api/admin/markets/[marketId]/settle` - çµç®—å¸‚å ´
- `GET /api/admin/markets/[marketId]/bets` - ç²å–å¸‚å ´ä¸‹æ³¨ï¼ˆå·²æœ‰ï¼‰
- `GET /api/admin/markets/[marketId]/comments` - ç²å–å¸‚å ´è©•è«–ï¼ˆå·²æœ‰ï¼‰

---

### 3. ä¸‹æ³¨ç®¡ç† (`/pgadmin2026/bets`)

#### åŠŸèƒ½åˆ—è¡¨
- âœ… **æŸ¥çœ‹ä¸‹æ³¨åˆ—è¡¨**
  - é€šéå¸‚å ´ ID æŸ¥è©¢
  - æŒ‰ç‹€æ…‹ç¯©é¸ï¼ˆPENDING, WON, LOST, REFUNDEDï¼‰
  - é¡¯ç¤ºä¸‹æ³¨è©³æƒ…ï¼ˆç”¨æˆ¶ã€å¸‚å ´ã€é¸æ“‡ã€é‡‘é¡ã€ç‹€æ…‹ï¼‰

- âœ… **åˆªé™¤ä¸‹æ³¨**
  - åªèƒ½åˆªé™¤æœªçµç®—å¸‚å ´çš„ä¸‹æ³¨
  - æœƒè‡ªå‹•é€€æ¬¾
  - éœ€è¦è¼¸å…¥åˆªé™¤åŸå› 

#### API è·¯ç”±
- `GET /api/admin/markets/[marketId]/bets` - ç²å–å¸‚å ´ä¸‹æ³¨ï¼ˆå·²æœ‰ï¼‰
- `DELETE /api/admin/bets/[betId]` - åˆªé™¤ä¸‹æ³¨ï¼ˆå·²æœ‰ï¼‰

#### æ³¨æ„
- ç›®å‰æ²’æœ‰å…¨å±€ä¸‹æ³¨åˆ—è¡¨ APIï¼Œéœ€è¦é€šéå¸‚å ´ ID æŸ¥è©¢
- å¯ä»¥å¾å¸‚å ´è©³æƒ…é é¢æŸ¥çœ‹è©²å¸‚å ´çš„æ‰€æœ‰ä¸‹æ³¨

---

### 4. è©•è«–ç®¡ç† (`/pgadmin2026/comments`)

#### åŠŸèƒ½åˆ—è¡¨
- âœ… **æŸ¥çœ‹è©•è«–åˆ—è¡¨**
  - é€šéå¸‚å ´ ID æŸ¥è©¢
  - é€šéç”¨æˆ¶ ID æŸ¥è©¢
  - é¡¯ç¤ºè©•è«–è©³æƒ…ï¼ˆç”¨æˆ¶ã€å¸‚å ´ã€å…§å®¹ã€é»è®šæ•¸ï¼‰

- âœ… **ç·¨è¼¯è©•è«–**
  - ä¿®æ”¹è©•è«–å…§å®¹
  - éœ€è¦è¼¸å…¥ç·¨è¼¯åŸå› 

- âœ… **åˆªé™¤è©•è«–**
  - éœ€è¦è¼¸å…¥åˆªé™¤åŸå› 

#### API è·¯ç”±
- `GET /api/admin/markets/[marketId]/comments` - ç²å–å¸‚å ´è©•è«–ï¼ˆå·²æœ‰ï¼‰
- `GET /api/admin/users/[userId]/comments` - ç²å–ç”¨æˆ¶è©•è«–ï¼ˆå·²æœ‰ï¼‰
- `PATCH /api/admin/comments/[commentId]` - ç·¨è¼¯è©•è«–ï¼ˆå·²æœ‰ï¼‰
- `DELETE /api/admin/comments/[commentId]` - åˆªé™¤è©•è«–ï¼ˆå·²æœ‰ï¼‰

---

## ğŸ“‹ é é¢çµæ§‹

```
/pgadmin2026/
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ page.tsx                    # ç”¨æˆ¶åˆ—è¡¨
â”‚   â””â”€â”€ [userId]/
â”‚       â”œâ”€â”€ page.tsx                # ç”¨æˆ¶è©³æƒ…
â”‚       â””â”€â”€ edit/
â”‚           â””â”€â”€ page.tsx            # ç·¨è¼¯ç”¨æˆ¶
â”œâ”€â”€ markets/
â”‚   â”œâ”€â”€ page.tsx                    # å¸‚å ´åˆ—è¡¨
â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â””â”€â”€ page.tsx                # å‰µå»ºå¸‚å ´
â”‚   â””â”€â”€ [marketId]/
â”‚       â”œâ”€â”€ page.tsx                # å¸‚å ´è©³æƒ…ï¼ˆå·²æœ‰ï¼‰
â”‚       â””â”€â”€ edit/
â”‚           â””â”€â”€ page.tsx            # ç·¨è¼¯å¸‚å ´
â”œâ”€â”€ bets/
â”‚   â””â”€â”€ page.tsx                    # ä¸‹æ³¨ç®¡ç†
â””â”€â”€ comments/
    â””â”€â”€ page.tsx                    # è©•è«–ç®¡ç†
```

---

## ğŸ”§ API è·¯ç”±çµæ§‹

```
/api/admin/
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ route.ts                    # GET - ç”¨æˆ¶åˆ—è¡¨
â”‚   â””â”€â”€ [userId]/
â”‚       â”œâ”€â”€ route.ts                # GET, PATCH, DELETE
â”‚       â”œâ”€â”€ activity/
â”‚       â”‚   â””â”€â”€ route.ts            # GET - ç”¨æˆ¶æ´»å‹•
â”‚       â””â”€â”€ comments/
â”‚           â””â”€â”€ route.ts            # GET - ç”¨æˆ¶è©•è«–
â”œâ”€â”€ markets/
â”‚   â”œâ”€â”€ route.ts                    # POST - å‰µå»ºå¸‚å ´
â”‚   â””â”€â”€ [marketId]/
â”‚       â”œâ”€â”€ route.ts                # PATCH, DELETE
â”‚       â”œâ”€â”€ settle/
â”‚       â”‚   â””â”€â”€ route.ts            # POST - çµç®—å¸‚å ´
â”‚       â”œâ”€â”€ bets/
â”‚       â”‚   â””â”€â”€ route.ts            # GET - å¸‚å ´ä¸‹æ³¨ï¼ˆå·²æœ‰ï¼‰
â”‚       â””â”€â”€ comments/
â”‚           â””â”€â”€ route.ts            # GET - å¸‚å ´è©•è«–ï¼ˆå·²æœ‰ï¼‰
â”œâ”€â”€ bets/
â”‚   â””â”€â”€ [betId]/
â”‚       â””â”€â”€ route.ts                # DELETEï¼ˆå·²æœ‰ï¼‰
â””â”€â”€ comments/
    â””â”€â”€ [commentId]/
        â””â”€â”€ route.ts                # PATCH, DELETEï¼ˆå·²æœ‰ï¼‰
```

---

## âš ï¸ å¾…æ”¹é€²é …ç›®

### 1. Admin ID ç²å–
ç›®å‰æ‰€æœ‰åˆªé™¤/ç·¨è¼¯æ“ä½œéƒ½ä½¿ç”¨ç¡¬ç·¨ç¢¼çš„ `admin-user-id`ï¼š
```typescript
const adminId = "admin-user-id"; // TODO: Get from auth context
```

**éœ€è¦**ï¼š
- å¾èªè­‰ä¸Šä¸‹æ–‡ç²å–ç•¶å‰ç®¡ç†å“¡ ID
- æˆ–å¾ JWT token ä¸­æå–

### 2. éŒ¯èª¤è™•ç†
- æ·»åŠ æ›´å‹å¥½çš„éŒ¯èª¤æç¤º
- æ·»åŠ åŠ è¼‰ç‹€æ…‹æŒ‡ç¤ºå™¨
- æ·»åŠ æ“ä½œæˆåŠŸæç¤ºï¼ˆä½¿ç”¨ toast é€šçŸ¥ï¼‰

### 3. è¡¨å–®é©—è­‰
- æ·»åŠ å‰ç«¯è¡¨å–®é©—è­‰
- é¡¯ç¤ºé©—è­‰éŒ¯èª¤è¨Šæ¯

### 4. åˆ†é æ”¹é€²
- æ·»åŠ ç¸½æ•¸é¡¯ç¤º
- æ·»åŠ è·³è½‰åˆ°æŒ‡å®šé é¢
- æ”¹é€²åˆ†é  UI

### 5. æœç´¢æ”¹é€²
- æ·»åŠ é«˜ç´šæœç´¢é¸é …
- æ·»åŠ æœç´¢æ­·å²
- æ·»åŠ æœç´¢çµæœçµ±è¨ˆ

### 6. æ‰¹é‡æ“ä½œ
- æ‰¹é‡åˆªé™¤ç”¨æˆ¶
- æ‰¹é‡åˆªé™¤ä¸‹æ³¨
- æ‰¹é‡åˆªé™¤è©•è«–

### 7. å°å‡ºåŠŸèƒ½
- å°å‡ºç”¨æˆ¶åˆ—è¡¨ç‚º CSV
- å°å‡ºå¸‚å ´åˆ—è¡¨ç‚º CSV
- å°å‡ºä¸‹æ³¨è¨˜éŒ„ç‚º CSV

---

## ğŸ§ª æ¸¬è©¦å»ºè­°

### ç”¨æˆ¶ç®¡ç†
1. è¨ªå• `/pgadmin2026/users` æŸ¥çœ‹ç”¨æˆ¶åˆ—è¡¨
2. æœç´¢ç”¨æˆ¶
3. é»æ“Šç”¨æˆ¶æŸ¥çœ‹è©³æƒ…
4. ç·¨è¼¯ç”¨æˆ¶ä¿¡æ¯
5. åˆªé™¤ç”¨æˆ¶ï¼ˆæ¸¬è©¦ï¼‰

### å¸‚å ´ç®¡ç†
1. è¨ªå• `/pgadmin2026/markets` æŸ¥çœ‹å¸‚å ´åˆ—è¡¨
2. å‰µå»ºæ–°å¸‚å ´
3. ç·¨è¼¯å¸‚å ´ä¿¡æ¯
4. æŸ¥çœ‹å¸‚å ´è©³æƒ…ï¼ˆä¸‹æ³¨å’Œè©•è«–ï¼‰
5. åˆªé™¤å¸‚å ´ï¼ˆæ¸¬è©¦ï¼‰

### ä¸‹æ³¨ç®¡ç†
1. è¨ªå• `/pgadmin2026/bets`
2. è¼¸å…¥å¸‚å ´ ID æŸ¥è©¢ä¸‹æ³¨
3. åˆªé™¤ä¸‹æ³¨ï¼ˆæ¸¬è©¦ï¼‰

### è©•è«–ç®¡ç†
1. è¨ªå• `/pgadmin2026/comments`
2. è¼¸å…¥å¸‚å ´ ID æˆ–ç”¨æˆ¶ ID æŸ¥è©¢è©•è«–
3. ç·¨è¼¯è©•è«–
4. åˆªé™¤è©•è«–

---

## ğŸ“ ä½¿ç”¨èªªæ˜

### è¨ªå•ç®¡ç†å¾Œå°
1. è¨ªå• `/pgadmin2026/login`
2. è¼¸å…¥å¯†ç¢¼ï¼ˆé»˜èªï¼š`pgadmin2026`ï¼‰
3. ç™»å…¥å¾Œè¨ªå•å„å€‹ç®¡ç†é é¢

### æ“ä½œæµç¨‹
1. **æŸ¥çœ‹åˆ—è¡¨** â†’ é»æ“Šã€ŒæŸ¥çœ‹ã€æŸ¥çœ‹è©³æƒ…
2. **ç·¨è¼¯** â†’ é»æ“Šã€Œç·¨è¼¯ã€ä¿®æ”¹ä¿¡æ¯
3. **åˆªé™¤** â†’ é»æ“Šã€Œåˆªé™¤ã€ï¼Œè¼¸å…¥åŸå› ç¢ºèª

---

## ğŸ¯ ä¸‹ä¸€æ­¥

æ ¹æ“šä½ çš„éœ€æ±‚ï¼Œå¯ä»¥ï¼š
1. æ·»åŠ æ›´å¤šç¯©é¸é¸é …
2. æ”¹é€² UI/UX
3. æ·»åŠ æ‰¹é‡æ“ä½œ
4. æ·»åŠ å°å‡ºåŠŸèƒ½
5. æ”¹é€²éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶åé¥‹
6. æ·»åŠ æ“ä½œæ—¥èªŒæŸ¥çœ‹

**æ‰€æœ‰åŸºæœ¬ CRUD åŠŸèƒ½å·²å¯¦ç¾ï¼Œå¯ä»¥é–‹å§‹æ¸¬è©¦å’Œä½¿ç”¨äº†ï¼**
